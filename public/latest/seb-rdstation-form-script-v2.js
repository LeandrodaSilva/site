import"./seb-crm-schedule-datepicker.js";import"./seb-textfield.js";import"./seb-autocomplete.js";import"./seb-button.js";import"./seb-rd-station-radio-group-v2.js";import{i as e,a as t,e as i,s as l}from"./a37fd545.js";import"./9bde2683.js";import"./f844c7fe.js";import"./68cb9b1b.js";class n{constructor(e){this.__forms=[],this.__options={primaryColor:"#2e9e46",apiKey:"Z2ujvH0qhC3Z9ijxZ59-mTYZa0civH4WMTrcJZCCTjGdAzFubsJ7dg==",env:void 0,stylized:!0,customButton:!0,fields:{cf_ptr_anoletivo:{options:{"f17b1920-4fd2-ed11-a7c7-000d3a88ffc8":"2024","203a4626-4fd2-ed11-a7c7-000d3a88ffc8":"2025"}},cf_ptr_cpfdoresponsavel:{label:"CPF do Responsável *",type:"cpf"},cf_ptr_datadenascimentoaluno:{mask:"00/00/0000"},cf_ptr_nascimentoresponsavel:{mask:"00/00/0000",hide:!0,type:"date",hideOnLoad:!0},cf_ptr_tipodelead:{value:"956840000",hide:!0},cf_ptr_escolaorigem:{value:"137d2874-b247-43ec-8af7-f42d3d5e3d82",hide:!0},cf_seb_tipo_agenda:{value:"284360000",hide:!0},cf_ptr_origem:{value:"956840000",hide:!0},cf_ptr_ano:{value:"f17b1920-4fd2-ed11-a7c7-000d3a88ffc8",hide:!0},cf_ptr_proximatarefa:{value:"775d2310-437b-e811-a95f-000d3ac09449",hide:!0},email:{label:"Seu e-mail *"},cf_ptr_nomedoaluno:{label:"Nome do Aluno *",regex:"^[A-zÀ-ú\\s]*$"},cf_ptr_nomedoresponsavel:{regex:"^[A-zÀ-ú\\s]*$"},cf_ptr_unidade:{options:{"5e1e6f5e-e27a-e811-a95f-000d3ac09449":"Continente","601e6f5e-e27a-e811-a95f-000d3ac09449":"Ensino Médio Centro","621e6f5e-e27a-e811-a95f-000d3ac09449":"Pré-Vestibular Centro"}},cf_ptr_identificacao:{options:{95684e4:"Responsável por um aluno"},type:"radio",stylized:!0,hide:!1,value:"956840000"},cf_tipo_formulario_hidden:{hide:!0,value:"Matrícula"},cf_ptr_dataagenda:{hide:!0},cf_ptr_integracao:{hide:!0},cf_ptr_errointegracao:{hide:!0},cf_ptr_cursodaunidade:{hide:!0},cf_ptr_segmento:{hide:!0},cf_ptr_telefonecelular:{},cf_ptr_telefonealuno:{},cf_ptr_agenda:{stylized:!1},cf_ptr_evento:{}}},window.addEventListener("DOMContentLoaded",(()=>{this.__options={...this.__options,...e,fields:{...this.__options.fields,...null==e?void 0:e.fields}},this.__forms=Array.from(document.querySelectorAll("form")),this.__init_field_cf_ptr_custom_radio(),this.__init_fields(),this.__init_field_cf_ptr_agenda(),this.__init_field_cf_ptr_evento(),this.__options.customButton&&this.__init_buttons()}))}static init(e){return new n(e)}__init_buttons(){var e;(null===(e=this.__options)||void 0===e?void 0:e.stylized)&&this.__for_each_form((e=>{const t=e.querySelectorAll("button");t&&t.forEach((t=>{t.setAttribute("style","display: none; visibility: hidden;"),t.insertAdjacentHTML("afterend",`\n              <seb-button\n                type="button"\n                style="--seb-primary-color: ${this.__options.primaryColor||"#6366F1"}; --seb-text-color: white"\n              >\n                ${t.textContent}\n              </seb-button>\n            `);const i=e.querySelector("seb-button");t.parentNode.classList.value.includes("submit")&&i?i.addEventListener("click",(e=>{e.preventDefault();let i=!0;this.__options.fields&&Object.keys(this.__options.fields).forEach((e=>{const t=this.__options.fields[e];t&&("cpf"===t.type?i=this.__is_field_valid_cpf_to_submit(e):"cpf/cnpj"===t.type&&(i=this.__is_field_valid_cpf_cnpj_to_submit(e)))})),i&&t.click()})):i&&i.addEventListener("click",(e=>{e.preventDefault(),t.click()}))}))}))}__is_field_valid_cpf_to_submit(t){let i=!1;return this.__for_each_form((l=>{const n=l.querySelector(`input[name="${t}"]`);n&&((null==n?void 0:n.value)&&(e(n.value)?(this.__set_field_valid(t,!0),null==n||n.setAttribute("isValid","true"),null==n||n.setCustomValidity(""),i=!0):(this.__set_field_valid(t,!1),null==n||n.setAttribute("isValid","false"),null==n||n.setCustomValidity("CPF inválido"))),null==n||n.reportValidity())})),i}__is_field_valid_cpf_cnpj_to_submit(i){let l=!1;return this.__for_each_form((n=>{const s=n.querySelector(`input[name="${i}"]`);s&&((null==s?void 0:s.value)&&(e(s.value)||t(s.value)?(this.__set_field_valid(i,!0),null==s||s.setAttribute("isValid","true"),null==s||s.setCustomValidity(""),l=!0):(this.__set_field_valid(i,!1),null==s||s.setAttribute("isValid","false"),null==s||s.setCustomValidity("CPF/CNPJ inválido"))),null==s||s.reportValidity())})),l}__init_field_cf_ptr_evento(){this.__for_each_form((e=>{const t=e.querySelector("input[name=cf_ptr_evento]"),l=e.querySelector("select[name=cf_ptr_unidade]");if(t&&l){const n=document.createElement("select"),s=document.createElement("option");s.textContent="Nenhuma unidade selecionada",s.value="",n.id="select_field_event",n.className="bricks-form__input required",n.disabled=!0,n.appendChild(s),n.required=!0;const o=null==t?void 0:t.parentNode;o&&o.insertBefore(n,t),t.style.setProperty("display","none"),t.style.setProperty("visibility","hidden");const a=async l=>{const n=e.querySelector("#select_field_event");if(""===l){if(n){n.disabled=!0,n.innerHTML="";const e=document.createElement("option");e.textContent="Nenhuma unidade selecionada",e.value="",n.appendChild(e)}return}if(!n)return;n.addEventListener("change",(()=>{t.value=n.value})),n.disabled=!0,n.innerHTML="";const s=document.createElement("option");s.textContent="Aguarde",s.value="",n.appendChild(s),await i(l,this.__options.env,this.__options.apiKey).then((e=>{if(0===e.data.events.length){const e=n.querySelector('option[value=""]');e&&(e.textContent="Não foram encontrados eventos")}else e.data.events.forEach((e=>{const t=n.querySelector('option[value=""]');if(t){t.textContent="Selecione",t.value="";const i=document.createElement("option");i.value=e.eventId,i.textContent=e.eventName,n.appendChild(i),n.disabled=!1}}))}))};l.addEventListener("change",(async e=>{t.value="",a(e.target.value)}))}}))}__init_fields(){this.__options.fields&&Object.keys(this.__options.fields).forEach((e=>{const t=this.__options.fields[e];t&&(t.value&&this.__set_field_value(e,t.value),t.label&&this.__set_field_label(e,t.label),t.options&&this.__replace_select_option_label(e,t.options),this.__options.stylized&&this.__stylize_form(e),"cpf"===t.type?(this.__is_field_valid_cpf(e),this.__init_field_mask(e,"000.000.000-00")):"cpf/cnpj"===t.type?(this.__is_field_valid_cpf_cnpj(e),this.__set_field_mask_cpf_cnpj(e)):t.mask&&this.__init_field_mask(e,t.mask),t.hideOnLoad&&this.__set_field_hide_on_step(e),t.hide&&this.__set_field_hide(e),t.regex&&this.__set_field_regex(e,t.regex))}))}__set_field_mask_cpf_cnpj(e){this.__for_each_form((t=>{const i=t.querySelector(`input[name="${e}"]`);if(i){const e=$(i),t=(t,i,l,n)=>{const s=["000.000.000-000","00.000.000/0000-00"];e.mask(t.length>14?s[1]:s[0],n)};e.length>11?e.mask("00.000.000/0000-00",{onKeyPress:t}):e.mask("000.000.000-00#",{onKeyPress:t})}}))}__is_field_valid_cpf_cnpj(i){this.__for_each_form((l=>{const n=l.querySelector(`input[name="${i}"]`);n&&n.addEventListener("input",(()=>{(null==n?void 0:n.value)&&(e(n.value)||t(n.value)?(this.__set_field_valid(i,!0),null==n||n.setAttribute("isValid","true"),null==n||n.setCustomValidity("")):(this.__set_field_valid(i,!1),null==n||n.setAttribute("isValid","false"),null==n||n.setCustomValidity("CPF/CNPJ inválido")));n===document.activeElement&&(null==n||n.reportValidity())}))}))}__set_field_regex(e,t){this.__for_each_form((i=>{const l=i.querySelector(`input[name="${e}"]`);l&&(l.addEventListener("input",(()=>{(null==l?void 0:l.value)&&(new RegExp(t).test(l.value)?(this.__set_field_valid(e,!0),null==l||l.setAttribute("isValid","true"),null==l||l.setCustomValidity("")):(this.__set_field_valid(e,!1),null==l||l.setAttribute("isValid","false"),null==l||l.setCustomValidity("Campo inválido")));l===document.activeElement&&(null==l||l.reportValidity())})),l.addEventListener("input",(e=>{const i=e.target.value.match(new RegExp(t,"g"));l.value.length>0&&!i?l.value=l.value.slice(0,-1):i&&(l.value=i.join(""))})))}))}__stylize_form(e){this.__for_each_form((t=>{var i,l,n,s,o,a,d,r,_;const u=t.querySelector(`input[name="${e}"]`),c=t.querySelector(`select[name="${e}"]`);if("cf_ptr_evento"!==e&&"cf_ptr_identificacao"!==e)if(u){if("hidden"===u.type)return;if(this.__options.fields&&Object.keys(this.__options.fields).includes(u.name)){if(!1===(null===(i=this.__options.fields[u.name])||void 0===i?void 0:i.stylized))return;if(null===(l=this.__options.fields[u.name])||void 0===l?void 0:l.hide)return}u.style.opacity="0",u.style.width="0",u.style.height="0",u.style.position="absolute",u.style.top="50px",u.style.left="50%";const e=t.querySelector(`label[for="${u.id}"]`);e&&(e.style.display="none",e.style.visibility="hidden",e.style.height="0",e.style.width="0"),u.insertAdjacentHTML("afterend",`\n          <seb-textfield\n            style="--seb-primary-color: ${this.__options.primaryColor||"black"}; ${"cf_ptr_telefonecelular"===u.name||"cf_ptr_telefonealuno"===u.name?"--seb-border-radius: 0px 8px 8px 0":""}"\n            name="${u.name}"\n            id="seb-${u.id}"\n            class="field"\n            label="${null==e?void 0:e.textContent}"\n            value="${u.value}"\n          />\n        `);const n=t.querySelector(`seb-textfield[id="seb-${u.id}"]`);if(n){u.addEventListener("focus",(()=>{null==n||n.focus()})),n.addEventListener("input",(e=>{u.value=e.target.value,u.dispatchEvent(new Event("input")),u.dispatchEvent(new Event("keyup")),null==n||(n.value=u.value)}));const e=u.parentNode;e&&(null==e||e.setAttribute("style","position: relative;"),"cf_ptr_telefonecelular"===u.name&&(null==e||e.insertAdjacentHTML("afterbegin",`\n                <style rel="stylesheet">\n                  #${t.id} .select2-container a.select2-choice {\n                    height: 55px !important;\n                    border-style: solid !important;\n                    border-width: 1px !important;\n                    border-color: #e5e7eb !important;\n                  }\n                  #${t.id} .select2-container .select2-choice>.select2-chosen {\n                    margin-top: 8px;\n                  }\n                </style>\n              `),u.addEventListener("change",(e=>{null==n||(n.value=e.target.value)}))))}}else if(c){if("hidden"===c.type)return;if(this.__options.fields&&Object.keys(this.__options.fields).includes(c.name)){if(!1===(null===(n=this.__options.fields[c.name])||void 0===n?void 0:n.stylized))return;if(null===(s=this.__options.fields[c.name])||void 0===s?void 0:s.hide)return}c.style.opacity="0",c.style.width="0",c.style.height="0",c.style.position="absolute",c.style.top="50px",c.style.left="50%";const e=t.querySelector(`label[for="${c.id}"]`);e&&(e.style.display="none",e.style.visibility="hidden",e.style.height="0",e.style.width="0");const i=c.parentNode;i&&(null==i||i.setAttribute("style","position: relative;"));let l=[];const{fields:u}=this.__options;u&&(null===(o=u[c.name])||void 0===o?void 0:o.dontUseInputOptions)?(l=Object.keys(null!==(d=null===(a=u[c.name])||void 0===a?void 0:a.options)&&void 0!==d?d:{}).map((e=>{var t,i,l;return{text:null!==(l=null===(i=null===(t=u[c.name])||void 0===t?void 0:t.options)||void 0===i?void 0:i[e])&&void 0!==l?l:"",value:e}})),c.innerHTML="",l.forEach((e=>{const t=document.createElement("option");t.value=e.value,t.textContent=e.text,c.appendChild(t)}))):l=Array.from(c.options).map((e=>({text:e.text,value:e.value}))),c.insertAdjacentHTML("afterend",`\n          <seb-autocomplete\n            id="seb-${c.id}"\n            style="--seb-primary-color: ${this.__options.primaryColor||"black"}"\n            class="field"\n            select="true"\n            label="${null==e?void 0:e.textContent}"\n            options='${JSON.stringify(l)}'\n            noResultsText="Nenhum resultado encontrado"\n            value="${null!==(_=null===(r=Array.from(c.options).find((e=>e.value===c.value&&""!==c.value)))||void 0===r?void 0:r.text)&&void 0!==_?_:""}"\n          />\n        `);const p=t.querySelector(`seb-autocomplete[id="seb-${c.id}"]`);p&&(c.addEventListener("focus",(()=>{null==p||p.focus()})),c.addEventListener("change",(()=>{var e,t;null==p||(p.value=null!==(t=null===(e=Array.from(c.options).find((e=>e.value===c.value&&""!==c.value)))||void 0===e?void 0:e.text)&&void 0!==t?t:"")})),p.addEventListener("input",(e=>{if(e.target.value){const t=Array.from(c.options).find((t=>t.text===e.target.value));t&&(c.value=t.value)}else c.value=e.detail.value;c.dispatchEvent(new Event("change"))})))}}))}__init_field_cf_ptr_custom_radio(){var e,t,i,l,n,s;const o=document.createElement("seb-radio-group"),a=null===(e=this.__options.fields)||void 0===e?void 0:e.cf_ptr_identificacao;if(a){const e=Object.keys(null!==(t=a.options)&&void 0!==t?t:{}).map((e=>{var t,i,l,n;return{text:null!==(n=null===(l=null===(i=null===(t=this.__options.fields)||void 0===t?void 0:t.cf_ptr_identificacao)||void 0===i?void 0:i.options)||void 0===l?void 0:l[e])&&void 0!==n?n:"",value:e}}));o.setAttribute("options",JSON.stringify(e)),o.setAttribute("name","cf_ptr_identificacao"),o.setAttribute("value",null!==(i=a.value)&&void 0!==i?i:""),o.setAttribute("stylized",null!==(n=null===(l=a.stylized)||void 0===l?void 0:l.toString())&&void 0!==n?n:"true"),o.setAttribute("type",null!==(s=a.type)&&void 0!==s?s:"radio");document.querySelectorAll('input[name="cf_ptr_identificacao"]').forEach((e=>{const t=e;t.style.display="none",t.style.visibility="hidden",t.style.position="absolute",t.style.width="0",t.style.height="0";const i=t.parentNode;i instanceof HTMLElement&&(i.style.visibility="hidden",i.style.width="0",i.style.height="0",i.style.position="absolute");const l=null==i?void 0:i.parentNode;l instanceof HTMLElement&&l.className.includes("option")&&(l.style.visibility="hidden",l.style.width="0",l.style.height="0",l.style.position="absolute")}));const d=document.querySelector('.bricks-form__field[data-step="1"]');if(d){d.style.display="flex",d.style.flexDirection="column",d.style.justifyContent="flex-end",d.appendChild(o);d.querySelectorAll("label").forEach((e=>{e.style.top="0"}))}}}__init_field_cf_ptr_agenda(){this.__for_each_form((e=>{const t=e.querySelector("input[name=cf_ptr_agenda]"),i=e.querySelector("select[name=cf_ptr_unidade]");if(t&&i){t.value="";const n=i=>{l(i,this.__options.env,this.__options.apiKey).then((i=>{var l;null===(l=e.querySelector("seb-crm-schedule-datepicker"))||void 0===l||l.remove(),t.insertAdjacentHTML("afterend",`\n              <seb-crm-schedule-datepicker\n                style="--lit-datepicker-cell-selected: ${this.__options.primaryColor}"\n                schedule='${JSON.stringify(i)}'\n              />\n            `),t.style.opacity="0",t.style.width="0",t.style.height="0";const n=e.querySelector("seb-crm-schedule-datepicker"),s=e.querySelector("input[name=cf_ptr_dataagenda]");if(s){s.style.display="none",s.value="";const i=e.querySelector(`label[for="${t.id}"]`);i&&(i.style.display="none",n&&n.addEventListener("seb-crm-schedule-id",(({detail:{value:{name:e}}})=>{const[t]=String(e).split(" ");s.value=t})))}n&&n.addEventListener("seb-crm-schedule-id",(e=>{t.value=null==e?void 0:e.detail.value.schedulerId}))}))};i.value&&n(i.value),i.addEventListener("change",(e=>{var t;n(null===(t=e.target)||void 0===t?void 0:t.value)}))}}))}__replace_select_option_label(e,t){this.__for_each_form((i=>{var l,n;const s=i.querySelector(`select[name="${e}"]`);if(s)for(let e=0;e<s.options.length;e+=1){const i=s.options[e];if(i){const e=null!==(n=null===(l=i.textContent)||void 0===l?void 0:l.trim())&&void 0!==n?n:"";Object.keys(t).includes(e)&&(i.textContent=t[e])}}}))}__init_field_mask(e,t){this.__for_each_form((i=>{const l=i.querySelector(`input[name="${e}"]`);l&&$(l).mask(t,{translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}})}))}__set_field_value(e,t){this.__for_each_form((i=>{const l=i.querySelector(`input[name="${e}"]`),n=i.querySelector(`select[name="${e}"]`);l?l.value=t:n&&(n.value=t)}))}__set_field_hide_on_step(e){this.__for_each_form((t=>{var i,l,n,s,o,a;const d=t.querySelector(`input[name="${e}"]`),r=t.querySelector(`select[name="${e}"]`);d?(null===(i=d.parentElement)||void 0===i||i.style.setProperty("visibility","hidden"),null===(l=d.parentElement)||void 0===l||l.style.setProperty("height","0"),null===(n=d.parentElement)||void 0===n||n.style.setProperty("margin-bottom","0")):r&&(null===(s=r.parentElement)||void 0===s||s.style.setProperty("visibility","hidden"),null===(o=r.parentElement)||void 0===o||o.style.setProperty("height","0"),null===(a=r.parentElement)||void 0===a||a.style.setProperty("margin-bottom","0"))}))}__set_field_hide(e){this.__for_each_form((t=>{var i,l;const n=t.querySelector(`input[name="${e}"]`),s=t.querySelector(`select[name="${e}"]`);n?null===(i=n.parentElement)||void 0===i||i.style.setProperty("display","none"):s&&(null===(l=s.parentElement)||void 0===l||l.style.setProperty("display","none"))}))}__set_field_label(e,t){this.__for_each_form((i=>{const l=i.querySelector(`input[name="${e}"]`);if(l){const e=l.id,n=i.querySelector(`label[for="${e}"]`);n&&(n.textContent=t)}}))}__set_field_valid(e,t){this.__for_each_form((i=>{const l=i.querySelector(`input[name="${e}"]`);l&&(l.style.border=t?"1px solid #2e9e46":"1px solid #f00")}))}__is_field_valid_cpf(t){this.__for_each_form((i=>{const l=i.querySelector(`input[name="${t}"]`);l&&l.addEventListener("input",(()=>{(null==l?void 0:l.value)&&(e(l.value)?(this.__set_field_valid(t,!0),null==l||l.setAttribute("isValid","true"),null==l||l.setCustomValidity("")):(this.__set_field_valid(t,!1),null==l||l.setAttribute("isValid","false"),null==l||l.setCustomValidity("CPF inválido"))),14===l.value.length?null==l||l.reportValidity():null==l||l.setCustomValidity("")}))}))}__for_each_form(e){this.__forms.forEach(e)}}window.SebRdStationTestForm=n;
